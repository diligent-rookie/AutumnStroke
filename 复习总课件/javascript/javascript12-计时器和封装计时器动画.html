<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body>
<dl>
	<dt>javascript</dt>
    <dd>
    	<p>JavaScript的计时器：</p>
        <ol>
        	<li>循环计时器：每隔传入的毫秒时间执行一次传入的函数
            	<ul>
                	<li>语法：setInterval(函数,毫秒); </li>
                    <li>对比循环异同：不同点——循环定时器是带有时间概念的，而循环的所有重复执行的代码是瞬间完成的，没有时间概念；相同点——它们都在重复执行代码</li>
                    <li>少了定时器的页面将会减少了很多有趣和华丽的特效</li>
                    <li>例如：<pre>
    var i =0;
    setInterval(fn1,1000);
    function fn1(){document.title = i; i++;}</pre></li>
    				<li>计时器也是除了的直接调用和事件调用以外第三种调用函数的方法</li>
                    <li>setInterval的最小间隔：一般写20ms或以上，太短浏览器可能反应不过来，导致速度比预想的要慢</li>
                    <li>clearInterval() 停止循环计时器的方法</li>
                    <li>创建一个等于计时器返回值的变量var timer = setInterval()，在需要停止计时器的地方使用clearInterval()并传入变量就可以了，因为计时器的返回值就是类似一个序号的东西，而clearInterval()把序号传进去就可以停止该计时器了，例如：<pre>
    var timer = null; 
    var i =0;
    function fn1(){
    	document.title = i;
        i++;
    	if(i===10){clearInterval(timer);}
    }
    timer = setInterval(fn1,1000);</pre></li>
    				<li>计时器的bug：每次开启计时器若没有关闭之前的计时器会导致我们timer里保存的是最后一个计时器的返回值，从而无法关闭所有的计时器，解决方法——每次调用时关闭之前的计时器（尤其计时器是由用户控制的则一定要记得）</li>
                </ul>
            </li>
            <li>延时计时器：延时传入的毫秒时间执行一次传入的函数
            	<ul>
                	<li>语法：setTimeout(函数,毫秒);</li>
                    <li>循环计时器和延时计时器都要等一段时间后才执行第一次代码，若需要立即调用一次则需要在页面刷新后直接调用一次函数</li>
                    <li>对应的延时计时器的清除方法：clearTimeout(timer);</li>
                    <li>用clearTimeout()停止延时计时器后，若延时计时器的函数还未调用，那么函数便不会被执行了</li>
            	</ul>
            </li>
        </ol>
        <p>管理和封装计时器：</p>
        <ol>
        	<li>配合getStyle()做一个每点击一次按钮便让一个div向前移动10px的效果，如果用计时器调用需要注意以下内容：
            	<ul>
                	<li>通过判断来让它在某个地方停止不能用==，若总长不能整除步长会停不下来</li>
                    <li>如果用>=会停下来，但不能直接赋值，该限制应该在赋值之前，否则在视觉上有个后退效果</li>
                    <li>每次点击的时候会开启一个新定时器，应该每次开前先清除之前的计时器</li>
                    <li>timer定义成oDiv.timer，并在定义时清除一下这个自定义属性，clearInterval可以清除null和未定义，这样做的好处是不靠任何外面的变量，为的是后面的封装</li>
                </ul>
            </li>
            <li>将上面的计时器动画改成用两个按钮分别控制div向前后动，在进行封装时，注意以下内容：
            	<ul>
                	<li>分清代码中哪些数据是变化的，并把他们变成参数 </li>
                    <li>事件调用函数时函数名是不能加()的，如果需要传参必须将该事件调用改成调用匿名函数，然后在匿名函数里面直接调用该函数的办法</li>
                    <li>运算符号是不能作为参数传递的，只能在函数内部通过判断的方式来分别执行</li>
                </ul>
            </li>
            <li>将上面的计时器动画改成用四个按钮分别控制div向上、下、左、右四个方向移动：
            	<ul>
                	<li>继续合并代码，如：
if(a&gt;b&amp;&amp;c&gt;0){}和if(a&lt;b&amp;&amp;c&lt;0){}变成if(a&gt;b&&c&gt;0||a&lt;b&&c&lt;0){}</li>
					<li>传入的正值和负值对用户来说并不友好，用户还要根据方向来判断需要传入值得正负，我们可以把代码改成判断当前位置和目标点位置来确定</li>
                    <li>我们在封装时的大量判断代码可以方便用户提高用户体验，同时也是方便自己以后来使用</li>
                </ul>
            </li>
            <li>回调函数：就是一个函数执行完毕后再执行另外一个函数</li>
			<li>在封装的函数内部回调函数不一定有，因此需要做一个判断if(endFn){endFn();}（若函数存在则执行它）和endFn&amp;&amp;endFn();等价（未定义就返回未定义，否则执行后面的函数。）</li>
            <li>将上面封装成动画函数doMove并做练习5</li>
        </ol>
    </dd>
    <dt>练习：</dt>
    <dd>
    	<p>1、给body设置一个背景再设置两个按钮，让body的背景在点击"换背景"按钮时每隔3秒自动切换一次，点击"停"按钮时，停止切换<br/>把上面练习中的两个按钮功能集中在一个按钮上面</p>
        <p>2、一个img显示4张图片，让该元素每隔3秒自动切换一张图片<br/>在该题的基础上加上鼠标移入时让自动切换停止，鼠标离开继续切换的效果</p>
        <p>3、页面刷新2秒后弹出一个广告（弹出一个纯色背景即可）<br/>在上题的基础上在广告右上角加个关闭按钮，要求让弹窗展示3秒后自动消失，若在那之前点击了关闭按钮则立即关闭弹窗并停止该延时计时器</p>
        <p>4、QQ显示详细内容效果，鼠标移到名字上时立即展示详情，离开名字0.7秒后详情消失，若从名字移动到详情内容上时详情不消失（0.7秒之内进入并且两者之间有间距），从展示内容上离开后0.7秒再消失</p>
        <p>5、在页面上布局平铺20个100X100红色的方块，点击我们的浏览器的窗口时让每个方块每隔200毫秒以每30毫秒7像素的速度掉下来一个，直到所有的方块掉到500的位置</p>
    </dd>
</dl>
</body>
</html>
