<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body>
<dl>
	<dt>javascript</dt>
    <dd>
    	<p>Ajax代码解析</p>
        <ol>
            <li>自己封装一个Ajax：思考步骤：和打电话类似
            	<ul>
                	<li>买个手机并申请个号码（创建Ajax对象）</li>
                    <li>向需要拨打的号码拨号（与服务器连接）</li>
                    <li>向对方说话（发送请求）</li>
                    <li>听对方话说（接收返回值）</li>
                </ul>
            </li>
            <li>之前用的js文件中的代码如下：<pre>
    function ajax(url,fnSucc,fnFaild){
        //参数：1、连接服务器的地址；2、成功时函数；3、失败时函数
        //1、创建Ajax对象
        var oAjax = null;
        if(window.XMLHttpRequest){
            oAjax = new XMLHttpRequest(); //ie6及以下不兼容
        }else{
            oAjax = new ActiveXObjext("Microsoft.XMLHTTP");
        }
        
        //2、连接服务器
        oAjax.open('GET',url,true);
        
        //3、发送请求
        oAjax.send();
        
        //4、接收服务器的返回
        oAjax.onreadystatechange = function(){
            if(oAjax.readyState ==4){  //完成
                if(oAjax.status ==200){
                    //alert('成功： '+oAjax.responseText);
                    fnSucc(oAjax.responseText);
                }else{
                    //alert('失败');
                    if(fnFaild){
                        fnFaild();
                    }
                }
            }
        }
    }</pre></li>
    		<li>创建Ajax对象：<pre>
    ActiveXObject('Microsoft.XMLHTTP')//ie6自带的插件
    XMLHttpRequest() </pre>之前我们说全局变量和全局函数都是window的属性和方法，只是前面的window.被省略了，但是他们未定义的时候出错是不同的（用一个不存在的变量会出错，而用一个不存在的属性只是未定义），因此可以用window.XX的方式做判断</li>
    		<li>连接服务器：open(方法,文件名,异步传输)，方法——GET/POST，文件名——你的文件名，同步和异步——false/true（事件一件一件进行就是同步，多件事一起进行就是异步）</li>
            <li>发送请求：send()</li>
            <li>接收返回：onreadystatechange事件：与服务器发生数据传输时，readyState属性：请求状态
            	<ul>
                	<li>0（未初始化）还没有调用open()方法</li>
                    <li>1（载入）已调用send()方法，正在发送请求</li>
                    <li>2（载入完成）send()方法完成，已收到全部相应内容</li>
                    <li>3（解析）正在解析相应内容</li>
                    <li>4（完成）相应内容解析完成，可以在客户端调用了</li>
                </ul>status属性：是否成功（200成功，常见失败404）；responseText属性：返回的数据</li>
        </ol>
        <p>Ajax的优缺点：</p>
        <ol>
        	<li>优点：
            	<ul>
                	<li>1.无刷新更新数据：Ajax最大的优点就是能在不刷新整个页面的情况下维持与服务器通信</li>
                    <li>2.异步与服务器通信：使用异步的方式与服务器通信，不打断用户的操作</li>
                    <li>3.前端与后端负载均衡：将一些后端的工作移到前端，减少服务器与带宽的负担</li>
                    <li>4.基于规范被广泛支持：不需要下载浏览器插件或者小程序，但需要客户允许JavaScript在浏览器上执行。</li>
                    <li>5.界面与应用分离：Ajax使得界面与应用分离，也就是数据与呈现分离</li>
                </ul>
            </li>
            <li>缺点：下面所阐述的ajax的缺陷都是它先天所产生的（部分已经解决了或者有解决方法）
            	<ul>
                	<li>1.Ajax干掉了Back与History功能，即对浏览器机制的破坏：在动态更新页面的情况下，用户无法回到前一页的页面状态，因为浏览器仅能记忆历史纪录中的静态页面</li>
                    <li>2.安全问题：AJAX技术给用户带来很好的用户体验的同时也对IT企业带来了新的安全威胁，Ajax技术就如同对企业数据建立了一个直接通道。这使得开发者在不经意间会暴露比以前更多的数据和服务器逻辑。</li>
                    <li>3.对搜索引擎支持较弱</li>
                    <li>4.破坏程序的异常处理机制</li>
                    <li>5.违背URL与资源定位的初衷</li>
                    <li>6.不能很好地支持移动设备</li>
                    <li>7.客户端肥大，太多客户段代码造成开发上的成本</li>
                </ul>
            </li>
        </ol>
    </dd>
    <dt></dt>
    <dd>

    </dd>
</dl>
</body>
</html>
